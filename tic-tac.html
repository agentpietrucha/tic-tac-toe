<!DOCTYPE html>
<html>
<head>
	<title>tic-tac-toe</title>
	<link href='http://fonts.googleapis.com/css?family=Roboto+Slab|Raleway:600' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="./stylesheets/my.css"></link>
</head>
<body class="bodyTic">
<div class="tic"><h1 class="h1">TIC-TAC-TOE.BeTA</h1></div>
<div class="container">
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
</div>
<div class="winner"><p id="td1"></p></div>
<div class="reload" id="divrel">reload</div>
<script>
	var buttrel = document.getElementById('divrel');
	buttrel.onclick = function() {
		location.reload();
	}
	var a = document.querySelectorAll('.box')
	var player = 1;
	//tu trzeba potem usunac = 'mions'
	var player1 = 'mions';
	var player2 = 'benio';
	function playerName() {
		player1 = prompt('You are the player1, choose your name');
		player2 = prompt('You are the player2, choose your name');
	}
	// playerName();
	function changeBackground(target, color) {
		target.classList.add(color);
	}
	function insertText(playerName) {
		document.getElementById('td1').innerHTML = playerName + ' won!';
	}
	function judge() {
		var checks = ['circle', 'cross'];

		for (var i = checks.length - 1; i >= 0; i--) {
			var check = checks[i];
			var player = player1;
			function isLine(input1, input2, input3) {
				if (input1.classList.contains(check) && input2.classList.contains(check) && input3.classList.contains(check)) {
					return true;
				}
			}
			if (check === 'cross') {
				player = player2;
			}
			if (isLine(a[0], a[1], a[2])) {
			insertText(player);
		} else if (isLine(a[3], a[4], a[5])) {
			insertText(player);
		} else if (isLine(a[6], a[7], a[8])) {
			insertText(player);
		} else if (isLine(a[0], a[3], a[6])) {
			insertText(player);
		} else if (isLine(a[1], a[4], a[7])) {
			insertText(player);
		} else if (isLine(a[2], a[5], a[8])) {
			insertText(player);
		} else if (isLine(a[0], a[4], a[8])) {
			insertText(player);
		} else if (isLine(a[6], a[4], a[2])) {
			insertText(player);
		}
	}
}
	var clickHandler = function(e){
		console.log("target.style.background", e.target.style.background, player)
		var color;
		if (e.target.classList.contains('cross') || e.target.classList.contains('circle')) {
			return;
		}
		if (player === 1) {
			color = 'circle';
		} else {
			color = 'cross';
		}
		changeBackground(e.target, color);
		judge();
		if (player === 1) {
			player = 2;
		} else {
			player = 1;
		}
	}
	for(var i = 0; i < a.length; i++){
		a[i].onclick = clickHandler;
	}
</script>
</body>
</html>

<!-- rgb(24, 171, 152), rgb(240, 218, 128) -->